def sudoku2(grid):
    d = 3
    check = []

    for i in range(9):
        check.append(0)

    for x in range(len(grid)):
        horz = check[:]
        vert = check[:]
        box = check[:]

        m = (x // d) * d
        p = (x % d) * d

        for y in range(len(grid[x])):
            n = (y // d)
            q = (y % d)

            if grid[x][y] != ".":
                horz[int(grid[x][y]) - 1] += 1

            if grid[y][x] != ".":
                vert[int(grid[y][x]) - 1] += 1

            if grid[m + n][p + q] != ".":
                box[int(grid[m + n][p + q]) - 1] += 1

        for j in range(len(check)):
            if horz[j] > 1 or vert[j] > 1 or box[j] > 1:
                return False

    return True



i = [['.', '.', '.', '1', '4', '.', '.', '2', '.'],
    ['.', '.', '6', '.', '.', '.', '.', '.', '.'],
    ['.', '.', '.', '.', '.', '.', '.', '.', '.'],
    ['.', '.', '1', '.', '.', '.', '.', '.', '.'],
    ['.', '6', '7', '.', '.', '.', '.', '.', '9'],
    ['.', '.', '.', '.', '.', '.', '8', '1', '.'],
    ['.', '3', '.', '.', '.', '.', '.', '.', '6'],
    ['.', '.', '.', '.', '.', '7', '.', '.', '.'],
    ['.', '.', '.', '5', '.', '.', '.', '7', '.']]

j = [[".",".",".",".",".",".","5",".","."],
 [".",".",".",".",".",".",".",".","."],
 [".",".",".",".",".",".",".",".","."],
 ["9","3",".",".","2",".","4",".","."],
 [".",".","7",".",".",".","3",".","."],
 [".",".",".",".",".",".",".",".","."],
 [".",".",".","3","4",".",".",".","."],
 [".",".",".",".",".","3",".",".","."],
 [".",".",".",".",".","5","2",".","."]]

print(sudoku2(i))
print(sudoku2(j))
